<style>
#domain_name {
    width: 350px;
}

@media only screen and (max-width: 767px) {
            #domain_name {
                width: 250px;
            }
        }
</style>

<%= turbo_stream_from "auctions" %>

<% content_for :hero do %>
    <div class="hero green">
        <h1><%= t('.title') %></h1>
    </div>
<% end %>

<%= render 'top_grid' %>

<div class="features-grid top narrow grey">
    <div class="ui search left">
        <div>
            <%= form_with url: auctions_path, 
                    method: :get,
                    data: { controller: 'debounce',
                            debounce_target: 'form',
                            turbo_action: "advance",
                            turbo_frame: "auction_list",
                            action: 'input->debounce#search' 
                            }, class: 'ui form field' do |f| %>
                <div class="ui input icon">
                    <%= f.text_field :domain_name, placeholder: t('search_by_domain_name') %>
                </div>

                <%= f.button(class: "ui icon primary button") do %>
                    <i aria-hidden="true" class="arrow right icon"></i>
                <% end %>
            <% end %>
        </div>
        <%= daily_summary_link %>
    </div>
    <div class="field">
        <%= link_to 'Clear', request.path, class: 'ui primary button' %>
    </div>
</div>

<div class="u-container">
    <div class="margin-block">
        <div class="grid one column">
            <%= turbo_frame_tag "auction_list" do %>
            <div class="column">
                <table class="ui table selectable celled center aligned" id="auctions-table">
                    <thead>
                        <tr>
                            <th>
                                <%= t('auctions.domain_name') %>
                                <%= sort_link_to "", "domain_name" %>
                            </th>
                            <th>
                                <%= t('auctions.ends_at') %>
                                <%= sort_link_to "", "ends_at" %>
                            </th>
                            <th>
                                <%= t('auctions.auction_type') %>
                                <%= sort_link_to "", "platform" %>
                            </th>
                            <th class="auctions-table-cell-name-no-mobile">
                                <%= t('auctions.your_current_price') %>
                                <%= sort_link_to "", "users_offer_cents" %>
                            </th>
                            <th>
                                <%= t('auctions.offer_owner') %>
                                <%= sort_link_to "", "platform" %>
                            </th>
                            <th class="auctions-table-cell-name-no-mobile center aligned five wide"><%= t('auctions.offer_actions') %></th>
                        </tr>
                    </thead>

                    <%= tag.tbody id: "bids", class: 'contents' do %>
                        <% @auctions.uniq.each do |auction| %>
                            <%= render partial: 'auction', locals: { auction: auction, q_user: current_user } %>
                        <% end %>
                    <% end %>
                </table>
            </div>

            <div class="column" style="margin-top:10px; text-align: center;">
                <% if @pagy.pages > 1 %>
                    <div class="footer">
                        <%== pagy_nav(@pagy) %>
                    </div>
                <% end %>
            </div>
            <% end %>
        </div>
    </div>
</div>
