<% content_for :title, t(".title") %>

<!-- Unreaded Notifications -->
<div class="o-container">
  <% if @unread_notifications.present? %>
    <div style='display: flex; justify-content: end; margin-bottom: 20px;'>
      <%= component 'common/buttons/button_to', title_caption: t('notifications.read_all'), href: mark_as_read_notifications_path, color: 'orange', options: { method: :patch } %>
    </div>
  <% end %>

  <h2><%= t('notifications.unreaded_notifications') %> <sup>(<%= @unread_notifications&.count %>)</sup></h2>
  <%= turbo_frame_tag :unread_notifications do %>
    <% if @unread_notifications.present? %>
      <div class="c-notifications">
        <% @unread_notifications.each do |notification| %>
          <article class="c-notification">
            <header class="c-notification__header">
              <div class="c-notification__heading">
                <%= component 'common/notifications/icon', notification: notification, readed: false %>
              </div>
              <div class="c-notification__header__date"><%= I18n.t('.notification_received', datetime: notification.created_at.strftime('%d/%m/%Y %H:%M')) %></div>
            </header>
            <main class="c-notification__main">
              <%= notification.to_notification.message %>
            </main>
          </article>
        <% end %>
      </div>
      <%= component 'common/pagy', pagy: @unread_pagy %>
    <% else %>
      <div class="c-notifications">
        <div class="c-notification__empty-state">
          <svg class="c-notification__empty-icon" xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            <path d="M9 8V6a3 3 0 0 1 6 0v2"></path>
            <line x1="6" y1="8" x2="18" y2="16"></line>
            <line x1="18" y1="8" x2="6" y2="16"></line>
          </svg>
          <p class="c-notification__empty-title"><%= t('notifications.no_unread_notifications') %></p>
          <p class="c-notification__empty-description"><%= t('notifications.all_caught_up') %></p>
        </div>
      </div>
    <% end %>
  <% end %>
<!-- Notifications -->

<!-- Readed Notifications -->
  <h2><%= t('notifications.readed_notifications') %> <sup>(<%= @read_notifications&.count %>)</sup></h2>
  <%= turbo_frame_tag :read_notifications do %>
    <% if @read_notifications.present? %>
      <div class="c-notifications c-notifications--ajax">
        <% @read_notifications.each do |notification| %>
          <article class="c-notification c-notification--read">
            <header class="c-notification__header">

              <%= component 'common/notifications/icon', notification: notification, readed: true %>

              <div class="c-notification__header__date"><%= I18n.t('.notification_received', datetime: notification.created_at.strftime('%d/%m/%Y %H:%M')) %></div>
            </header>
            <main class="c-notification__main">
              <%= notification.to_notification.message %>
            </main>
          </article>
        <% end %>
      </div>
      <%= component 'common/pagy', pagy: @read_pagy %>
    <% else %>
      <div class="c-notifications">
        <div class="c-notification__empty-state c-notification__empty-state--read">
          <svg class="c-notification__empty-icon c-notification__empty-icon--read" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            <circle cx="12" cy="12" r="1" fill="currentColor"></circle>
          </svg>
          <p class="c-notification__empty-title"><%= t('notifications.no_read_notifications') %></p>
        </div>
      </div>
    <% end %>
  <% end %>
<!-- Notifications -->
</div>
